class r{constructor(){this.token=document.querySelector('meta[name="csrf-token"]').getAttribute("content")}async toggleReaction(t,o){try{const a=await(await fetch("/api/reactions/toggle",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":this.token},body:JSON.stringify({comment_id:t,type:o})})).json();if(a.success)return this.updateReactionUI(t,a.stats),a.action}catch(e){console.error("Error toggling reaction:",e)}}async getReactionStats(t){try{const e=await(await fetch(`/api/reactions/stats/${t}`)).json();e.success&&this.updateReactionUI(t,e.stats)}catch(o){console.error("Error fetching reaction stats:",o)}}updateReactionUI(t,o){const e=["like","love","haha","wow","sad","angry"],a=document.querySelector(`#reactions-${t}`);a&&e.forEach(c=>{const s=a.querySelector(`.reaction-count-${c}`);s&&(s.textContent=o[c]||0)})}}document.addEventListener("DOMContentLoaded",()=>{window.reactionHandler=new r,document.querySelectorAll(".reaction-button").forEach(n=>{n.addEventListener("click",async t=>{t.preventDefault();const o=n.dataset.commentId,e=n.dataset.type;await window.reactionHandler.toggleReaction(o,e)==="added"?n.classList.add("active"):n.classList.remove("active")})})});
